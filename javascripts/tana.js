// Generated by CoffeeScript 1.6.2
var Tana;

Tana = (function() {
  function Tana(di) {
    this.di = di;
  }

  Tana.roundArray = function(list) {
    return list.map(function(x) {
      if (x != null) {
        return Math.round(x * 100) / 100;
      }
    });
  };

  Tana.prototype.MA = function(period, target) {
    var current_ma, i, ma, sum, _i, _j, _ref;

    if (period == null) {
      period = 20;
    }
    if (target == null) {
      target = this.di;
    }
    if (!((1 <= period && period <= target.length))) {
      return void 0;
    }
    ma = [];
    for (i = _i = 1; 1 <= period ? _i < period : _i > period; i = 1 <= period ? ++_i : --_i) {
      ma.push(void 0);
    }
    sum = target.slice(0, period).reduce(function(a, e) {
      return a + e;
    });
    current_ma = sum / period;
    ma.push(current_ma);
    for (i = _j = period, _ref = target.length; period <= _ref ? _j < _ref : _j > _ref; i = period <= _ref ? ++_j : --_j) {
      ma.push(current_ma += (target[i] - target[i - period]) / period);
    }
    return Tana.roundArray(ma);
  };

  Tana.prototype.EMA = function(period, target) {
    var alpha, current_ema, ema, i, sum, _i, _j, _ref;

    if (period == null) {
      period = 20;
    }
    if (target == null) {
      target = this.di;
    }
    if (!((1 <= period && period <= target.length))) {
      return void 0;
    }
    alpha = 2 / (period + 1);
    ema = [];
    for (i = _i = 1; 1 <= period ? _i < period : _i > period; i = 1 <= period ? ++_i : --_i) {
      ema.push(void 0);
    }
    sum = target.slice(0, period).reduce(function(a, e) {
      return a + e;
    });
    current_ema = sum / period;
    ema.push(current_ema);
    for (i = _j = period, _ref = target.length; period <= _ref ? _j < _ref : _j > _ref; i = period <= _ref ? ++_j : --_j) {
      ema.push(current_ema = ema[i - 1] + alpha * (target[i] - ema[i - 1]));
    }
    return Tana.roundArray(ema);
  };

  Tana.prototype.MACD = function(period) {
    if (period == null) {
      period = 20;
    }
    return void 0;
  };

  return Tana;

})();
